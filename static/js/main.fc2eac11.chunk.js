(this["webpackJsonpmeetings-calendar"]=this["webpackJsonpmeetings-calendar"]||[]).push([[0],{184:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n(27),s=n.n(c),u=n(80),o=n(167),i=(n(184),n(21)),l=u.c,j=n(67),d=n(295),b=n(83),h=n(55),O=n(301),f=n(300),p=function(e){var t=e.getFullYear(),n=e.getMonth()<10?"0".concat(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0".concat(e.getDate()):e.getDate();return"".concat(t,".").concat(n,".").concat(r)},m=n(7),v=function(e){return Object(m.jsx)(f.a,{dateCellRender:function(t){var n=p(t.toDate()),r=e.events.filter((function(e){return e.date===n}));return Object(m.jsx)("div",{children:r.map((function(e,t){return Object(m.jsx)("div",{children:e.description},t)}))})}})},g=n(25),x=n(297),E=n(299),S=n(298),y=n(134),T=n(53),I=n.n(T),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Required field";return{required:!0,message:e}},w=function(e){return function(){return{validator:function(t,n){return n.isSameOrAfter(I()())?Promise.resolve():Promise.reject(new Error(e))}}}},_=function(e){var t=Object(a.useState)({author:"",date:"",description:"",guest:""}),n=Object(j.a)(t,2),r=n[0],c=n[1],s=l((function(e){return e.authReducer})).user;return Object(m.jsxs)(x.a,{onFinish:function(){e.submit(Object(g.a)(Object(g.a)({},r),{},{author:s.username}))},children:[Object(m.jsx)(x.a.Item,{label:"Event name",name:"description",rules:[R()],children:Object(m.jsx)(E.a,{value:r.description,onChange:function(e){return c(Object(g.a)(Object(g.a)({},r),{},{description:e.target.value}))}})}),Object(m.jsx)(x.a.Item,{label:"Event date",name:"date",rules:[R(),w("Date is less then current date.")],children:Object(m.jsx)(S.a,{onChange:function(e){return function(e){e&&c(Object(g.a)(Object(g.a)({},r),{},{date:p(null===e||void 0===e?void 0:e.toDate())}))}(e)}})}),Object(m.jsx)(x.a.Item,{label:"Event guests",name:"guests",rules:[R()],children:Object(m.jsx)(y.a,{onChange:function(e){return c(Object(g.a)(Object(g.a)({},r),{},{guest:e}))},children:e.guests.map((function(e){return Object(m.jsx)(y.a.Option,{value:e.username,children:e.username},e.username)}))})}),Object(m.jsx)(b.a,{justify:"end",children:Object(m.jsx)(x.a.Item,{children:Object(m.jsx)(h.a,{type:"primary",htmlType:"submit",children:"Create"})})})]})},A=n(66),N=n(29),U=n.n(N),L=n(52),k=n(162),G=n(163),C=n(164),D=n.n(C),V=function(){function e(){Object(k.a)(this,e)}return Object(G.a)(e,null,[{key:"getUsers",value:function(){var e=Object(L.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.a.get("./users.json"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();!function(e){e.SET_AUTH="SET_AUTH",e.SER_ERROR="SER_ERROR",e.SET_USER="SET_USER",e.SET_IS_LOADING="SET_IS_LOADING"}(r||(r={}));var P,H={setUser:function(e){return{type:r.SET_USER,payload:e}},setAuth:function(e){return{type:r.SET_AUTH,payload:e}},setIsLoading:function(e){return{type:r.SET_IS_LOADING,payload:e}},setError:function(e){return{type:r.SER_ERROR,payload:e}},login:function(e,t){return function(){var n=Object(L.a)(U.a.mark((function n(r){return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r(H.setIsLoading(!0)),setTimeout(Object(L.a)(U.a.mark((function n(){var a,c;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V.getUsers();case 2:a=n.sent,(c=a.data.find((function(n){return n.username===e&&n.password===t})))?(localStorage.setItem("auth","true"),localStorage.setItem("username",e),r(H.setUser(c)),r(H.setAuth(!0))):r(H.setError("Wrong password or login")),r(H.setIsLoading(!1));case 6:case"end":return n.stop()}}),n)}))),1e3)}catch(a){r(H.setError("Oops! something went wrong"))}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(L.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("auth"),localStorage.removeItem("username"),t(H.setUser({})),t(H.setAuth(!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}};!function(e){e.SET_GUESTS="SET_GUESTS",e.SET_EVENTS="SET_EVENTS"}(P||(P={}));var J,F={setGuests:function(e){return{type:P.SET_GUESTS,payload:e}},setEvents:function(e){return{type:P.SET_EVENTS,payload:e}},fetchGuests:function(){return function(){var e=Object(L.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.getUsers();case 3:n=e.sent,t(F.setGuests(n.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},createEvent:function(e){return function(){var t=Object(L.a)(U.a.mark((function t(n){var r,a;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",(a=JSON.parse(r)).push(e),n(F.setEvents(a)),localStorage.setItem("events",JSON.stringify(a))}catch(c){console.log(c)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fetchEvents:function(e){return function(){var t=Object(L.a)(U.a.mark((function t(n){var r,a,c;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",a=JSON.parse(r),c=a.filter((function(t){return t.author===e||t.guest===e})),n(F.setEvents(c))}catch(s){console.log(s)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},M=Object(g.a)(Object(g.a)({},H),F),q=function(){var e=Object(u.b)();return Object(A.b)(M,e)},z=n(296),B=function(){var e=l((function(e){return e.authReducer})),t=e.error,n=e.isLoading,r=Object(a.useState)(""),c=Object(j.a)(r,2),s=c[0],u=c[1],o=Object(a.useState)(""),i=Object(j.a)(o,2),d=i[0],b=i[1],O=q().login;return Object(m.jsxs)(x.a,{onFinish:function(){O(s,d)},children:[t&&Object(m.jsx)("div",{style:{color:"red"},children:t}),Object(m.jsx)(x.a.Item,{label:"Username",name:"username",rules:[R("Please input your username!")],children:Object(m.jsx)(E.a,{value:d,onChange:function(e){return u(e.target.value)}})}),Object(m.jsx)(x.a.Item,{label:"Password",name:"password",rules:[R("Please input your password!")],children:Object(m.jsx)(E.a.Password,{value:s,onChange:function(e){return b(e.target.value)}})}),Object(m.jsx)(x.a.Item,{wrapperCol:{offset:8,span:16},children:Object(m.jsx)(h.a,{type:"primary",htmlType:"submit",loading:n,children:"Submit"})})]})};!function(e){e.LOGIN="/meetings-calendar/login",e.EVENT="/meetings-calendar/"}(J||(J={}));var W=[{path:J.LOGIN,component:function(){return Object(m.jsx)(d.a,{children:Object(m.jsx)(b.a,{justify:"center",align:"middle",className:"h100",children:Object(m.jsx)(z.a,{children:Object(m.jsx)(B,{})})})})},exect:!0}],Y=[{path:J.EVENT,component:function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],c=q(),s=c.fetchGuests,u=c.createEvent,o=c.fetchEvents,i=l((function(e){return e.eventReducer})),f=i.guests,p=i.events,g=l((function(e){return e.authReducer})).user;Object(a.useEffect)((function(){s(),o(g.username)}),[]);return Object(m.jsxs)(d.a,{children:[Object(m.jsx)(v,{events:p}),Object(m.jsx)(b.a,{justify:"center",children:Object(m.jsx)(h.a,{onClick:function(){return r(!0)},children:"Add Event"})}),Object(m.jsx)(O.a,{title:"Add Event",visible:n,footer:null,onCancel:function(){return r(!1)},children:Object(m.jsx)(_,{guests:f,submit:function(e){r(!1),u(e)}})})]})},exect:!0}],K=function(){return l((function(e){return e.authReducer})).isAuth?Object(m.jsxs)(i.d,{children:[Y.map((function(e){return Object(m.jsx)(i.b,{path:e.path,exact:e.exect,component:e.component},e.path)})),Object(m.jsx)(i.a,{to:J.EVENT})]}):Object(m.jsxs)(i.d,{children:[W.map((function(e){return Object(m.jsx)(i.b,{path:e.path,exact:e.exect,component:e.component},e.path)})),Object(m.jsx)(i.a,{to:J.LOGIN})]})},Q=n(302),X=function(){var e=Object(i.g)(),t=q().logout,n=l((function(e){return e.authReducer})),r=n.isAuth,a=n.user;return Object(m.jsx)(d.a.Header,{children:Object(m.jsx)(b.a,{justify:"end",children:r?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{style:{color:"white"},children:a.username}),Object(m.jsx)(Q.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(m.jsx)(Q.a.Item,{onClick:t,children:"Logout"},1)})]}):Object(m.jsx)(Q.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(m.jsx)(Q.a.Item,{onClick:function(){return e.push(J.LOGIN)},children:"Login"},1)})})})},Z=function(){var e=q(),t=e.setAuth,n=e.setUser;return Object(a.useEffect)((function(){localStorage.getItem("auth")&&(n({username:localStorage.getItem("username")}),t(!0))}),[]),Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(d.a,{children:[Object(m.jsx)(X,{}),Object(m.jsx)(d.a.Content,{children:Object(m.jsx)(K,{})})]})})},$=n(166),ee={isAuth:!1,error:"",isLoading:!1,user:{}};var te={events:[],guests:[]};var ne={authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_AUTH:return Object(g.a)(Object(g.a)({},e),{},{isAuth:t.payload,isLoading:!1});case r.SER_ERROR:return Object(g.a)(Object(g.a)({},e),{},{error:t.payload,isLoading:!1});case r.SET_IS_LOADING:return Object(g.a)(Object(g.a)({},e),{},{isLoading:t.payload});case r.SET_USER:return Object(g.a)(Object(g.a)({},e),{},{user:t.payload});default:return e}},eventReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.SET_GUESTS:return Object(g.a)(Object(g.a)({},e),{},{guests:t.payload});case P.SET_EVENTS:return Object(g.a)(Object(g.a)({},e),{},{events:t.payload});default:return e}}},re=Object(A.c)(ne),ae=Object(A.d)(re,Object(A.a)($.a));s.a.render(Object(m.jsx)(u.a,{store:ae,children:Object(m.jsx)(o.a,{children:Object(m.jsx)(Z,{})})}),document.getElementById("root"))}},[[292,1,2]]]);
//# sourceMappingURL=main.fc2eac11.chunk.js.map